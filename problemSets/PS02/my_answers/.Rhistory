print(colnames(rcv_info))
rcv_tidy <- rcv_info %>%
pivot_longer(
cols = !c(MEPID, MEPNAME, MS, NP, EPG),
names_to = "vote_id",
values_to = "decision"
)
head(rcv_tidy)
summary_table <- rcv_tidy %>%
group_by(decision) %>%
summarize(count= n())
head(summary_table)
joint_table <- left_join(rcv_tidy, mep_info, by = "MEPID")
head(mep_info)
mep_info <- mep_info |>
# rename some columns
rename(MEP id = `MEPID`)
mep_info <- mep_info |>
# rename some columns
rename("MEP id" = `MEPID`)
head(mep_info)
mep_info <- mep_info %>%
# rename some columns
rename(MEPID = `MEP ID`)
mep_info <- mep_info %>%
# rename some columns
rename(MEPID = `MEP id`)
head(mep_info)
joint_table <- left_join(rcv_tidy, mep_info, by = "MEPID")
rcv_tidy <- rcv_tidy %>%
mutate(MEPID = as.integer(MEPID))
joint_table <- left_join(rcv_tidy, mep_info, by = "MEPID")
mep_info <- mep_info %>% #casting it into an INT so I can join
mutate(MEPID = as.integer(MEPID))
joint_table <- left_join(rcv_tidy, mep_info, by = "MEPID")
head(join_table)
head(joint_table)
joint_table <- left_join(mep_info, rcv_tidy, by = "MEPID")
head(joint_table)
print(joint_table)
joint_table <- left_join(rcv_tidy, mep_info, by = "MEPID")
head(joint_table)
joint_table <- inner_join(rcv_tidy, mep_info, by = "MEPID")
head(joint_table)
joint_table <- inner_join(rcv_tidy, mep_info, by = "MEPID")
head(joint_table)
joint_table <- left_join(rcv_tidy, mep_info, by = "MEPID")
head(joint_table)
joint_table <- left_join(rcv_tidy, mep_info, by = "MEPID")
colSums(is.na(joint_table))
head(joint_table)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`),
mean_nomd2 = mean(`NOM-D2`)
)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3))
#print(colnames(mep_info))
#print(colnames(mep_info))
print(colnames(mep_info))
mep_info <- read_excel("/Users/nourkebbi/Documents/GitHub/DataViz_2026/problemSets/PS01/template/my_answers/mep_info_26Jul11.xls", sheet = "EP1")
head(mep_info)
mep_info <- mep_info %>% #renaming the column so I can join
rename(MEPID = `MEP id`)
mep_info <- mep_info %>% #casting it into an INT so I can join
mutate(MEPID = as.integer(MEPID))
#head(rcv_tidy)
joint_table <- left_join(rcv_tidy, mep_info, by = "MEPID")
colSums(is.na(joint_table))
head(joint_table)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`),
mean_nomd2 = mean(`NOM-D2`)
)
head(avg_table)
joint_table <- joint_table %>%
drop_na(`NOM-D1`,`NOM-D2`)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`),
mean_nomd2 = mean(`NOM-D2`)
)
joint_table <- joint_table %>%
drop_na()
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`),
mean_nomd2 = mean(`NOM-D2`)
)
head(avg_table)
info(joint_table)
glimpse(joint_table)
joint_table <- joint_table %>% #casting it into an INT so I can join
mutate(NOM-D1 = as.integer(NOM-D1),
joint_table <- joint_table %>% #casting it into an INT so I can join
mutate(NOM-D1 = as.integer(`NOM-D1`),
joint_table <- joint_table %>% #casting it into an INT so I can join
mutate(`NOM-D1` = as.integer(`NOM-D1`),
`NOM-D2` = as.integer(`NOM-D2``))
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`),
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(NOM-D1),
mean_nomd2 = mean(NOM-D2)
)
#print(joint_table)
joint_table <- joint_table %>% #casting it into an INT so I can join
mutate(`NOM-D1` = as.integer(`NOM-D1`),
`NOM-D2` = as.integer(`NOM-D2`))
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(NOM-D1),
mean_nomd2 = mean(NOM-D2)
)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(NOM-D1, na.rm = TRUE),
mean_nomd2 = mean(NOM-D2, na.rm = TRUE)
)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(NOM-D1, na.rm = TRUE),
mean_nomd2 = mean(NOM-D2, na.rm = TRUE)
)
head(mep_info)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`, na.rm = TRUE),
mean_nomd2 = mean(`NOM-D2`, na.rm = TRUE)
)
head(avg_table)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`),#, na.rm = TRUE),
mean_nomd2 = mean(`NOM-D2`))
head(avg_table)
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`), na.rm = TRUE),
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`), na.rm = TRUE),
avg_table <- joint_table %>%
group_by(EPG) %>%
summarize(
mean_yes_votes = mean(decision == 1)/mean(decision %in% c(1,2,3)),
mean_abstention = mean(decision == 3),
mean_nomd1 = mean(`NOM-D1`, na.rm = TRUE),
mean_nomd2 = mean(`NOM-D2`, na.rm = TRUE))
head(avg_table)
ggplot(mep_info, aes(x = `NOM-D1`, fill = EGP)) +
theme_minimal() +
labs(title = "Distribution of the  rst NOMINATE dimension by EP group,")
#Data Visualization Part 1
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
theme_minimal() +
labs(title = "Distribution of the  rst NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_density(alpha = 0.5) +
theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_boxplot() +
theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
#Data Visualization Part 1
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_bar(position = "stack") +
theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_bar(position = "dodge") +
theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
#Data Visualization Part 1
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_bar(position = "dodge") +
#theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_histogram(binwidth = 0.1) +
#theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
#Data Visualization Part 1
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_histogram(binwidth = 0.1, color = "white") +
#theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_histogram(binwidth = 0.05, position = "stack") +
#theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_bar() +
#theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, fill = `EP Group`)) +
geom_bar() +
theme_minimal() +
labs(title = "Distribution of the first NOMINATE dimension by EP group")
ggplot(mep_info, aes(x = `NOM-D1`, y = `NOM-D2`, color = `EP Group`)) +
geom_point() +
labs(title = "Scatterplot of nomdim1 and nomdim2")
dv_part3 <- join_table %<%
group_by (MEPID, `EP Group`) %<%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
dv_part3 <- joint_table %<%
group_by (MEPID, `EP Group`) %<%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
head(joint_table)
dv_part3 <- joint_table %<%
group_by (MEPID, EPG) %<%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
dv_part3 <- joint_table %<%
group_by(MEPID, EPG) %<%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
dv_part3 <- joint_table %>%
group_by(MEPID, EPG) %>%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
ggplot(dv_part3, aes(x = EPG, y = voting_yes)) +
geom_boxplot() +
labs(title = "The proportion voting Yes by EP group")
head(joint_table)
#Data Visualization Part 4
dv_part4 <- joint_table %>%
group_by(MEPID, `National Party`) %>%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
ggplot(dv_part3, aes(x = `National Party`, y = voting_yes)) +
geom_barplot() +
labs(title = "The proportion voting Yes by national party")
#Data Visualization Part 4
dv_part4 <- joint_table %>%
group_by(MEPID, `National Party`) %>%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
ggplot(dv_part3, aes(x = `National Party`, y = voting_yes)) +
geom_bar() +
labs(title = "The proportion voting Yes by national party")
dv_part4 <- joint_table %>%
group_by(MEPID, `National Party`) %>%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
ggplot(dv_part4, aes(x = `National Party`, y = voting_yes)) +
geom_bar() +
labs(title = "The proportion voting Yes by national party")
dv_part4 <- joint_table %>%
group_by(`National Party`) %>%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
ggplot(dv_part4, aes(x = `National Party`, y = voting_yes)) +
geom_bar() +
labs(title = "The proportion voting Yes by national party")
dv_part4 <- joint_table %>%
group_by(`National Party`) %>%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
ggplot(dv_part4, aes(x = `National Party`, y = voting_yes)) +
geom_bar() +
labs(title = "The proportion voting Yes by national party")
dv_part4 <- joint_table %>%
group_by(`National Party`) %>%
summarize(voting_yes = mean(decision == 1, na.rm = TRUE))
ggplot(dv_part4, aes(x = `National Party`, y = voting_yes)) +
geom_bar(stat = "identity") +
labs(title = "The proportion voting Yes by national party")
#loading datasets
nscc_data <- read_excel("/Users/nourkebbi/Documents/GitHub/DataViz_2026/problemSets/PS02/my_answers/NCSS_v1.csv")
library(tidyverse)
lapply(c("tidyverse", "ggplot2"),  pkgTest)
library(readxl)
nscc_data <- read_excel("/Users/nourkebbi/Documents/GitHub/DataViz_2026/problemSets/PS02/my_answers/NCSS_v1.csv")
#loading datasets
nscc_data <- read.csv("/Users/nourkebbi/Documents/GitHub/DataViz_2026/problemSets/PS02/my_answers/NCSS_v1.csv", header = TRUE, sep = ",")
head(nscc_data)
#head(nscc_data)
#filtering out columns
nscc_filtered <- nscc_data %>% select('CASEID','YEAR','DREGION','NUMOFFMBR','TRAD6','TRAD12','INCOME')
#filtering out columns
nscc_filtered <- nscc_data %>% select('CASEID','YEAR','GDREGION','NUMOFFMBR','TRAD6','TRAD12','INCOME')
head(ncss_filtered)
ncss_data <- read.csv("/Users/nourkebbi/Documents/GitHub/DataViz_2026/problemSets/PS02/my_answers/NCSS_v1.csv", header = TRUE, sep = ",")
ncss_filtered <- nscc_data %>% select('CASEID','YEAR','GDREGION','NUMOFFMBR','TRAD6','TRAD12','INCOME')
head(ncss_filtered)
unique(ncss_filtered$TRAD6)
unique(ncss_filtered$TRAD6)
ncss_filtered %>% filter(TRAD6 %in% c("Chrétiennes","Juives","Musulmanes"))
ncss_pivot <- ncss_filtered %>%
group_by(TRAD6, YEAR) %>%
summarize(
mean_income = mean(INCOME),
median_income = median(INCOME)
)
ncss_pivot
ncss_pivot <- ncss_filtered %>%
filter(YEAR == max(YEAR, na.rm - TRUE)) %>%
group_by(TRAD6, YEAR) %>%
summarize(
mean_income = mean(INCOME, na.rm = TRUE),
median_income = median(INCOME, na.rm = TRUE)
)
library(dplyr)
ncss_pivot <- ncss_filtered %>%
filter(YEAR == max(YEAR, na.rm - TRUE)) %>%
group_by(TRAD6, YEAR) %>%
summarize(
mean_income = mean(INCOME, na.rm = TRUE),
median_income = median(INCOME, na.rm = TRUE))
library(tidyverse)
lapply(c("tidyverse", "ggplot2"),  pkgTest)
library(dplyr)
library(readxl)
#Data Manipulation
#Part 1 loading datasets
ncss_data <- read.csv("/Users/nourkebbi/Documents/GitHub/DataViz_2026/problemSets/PS02/my_answers/NCSS_v1.csv", header = TRUE, sep = ",")
#head(ncss_data)
#filtering out columns
ncss_filtered <- nscc_data %>% select('CASEID','YEAR','GDREGION','NUMOFFMBR','TRAD6','TRAD12','INCOME')
#head(ncss_filtered)
#Part 2 filtering religions
#unique(ncss_filtered$TRAD6)
ncss_filtered %>% filter(TRAD6 %in% c("Chrétiennes","Juives","Musulmanes"))
#Part 3  pivoting
ncss_pivot <- ncss_filtered %>%
filter(YEAR == max(YEAR, na.rm - TRUE)) %>%
group_by(TRAD6, YEAR) %>%
summarize(
mean_income = mean(INCOME, na.rm = TRUE),
median_income = median(INCOME, na.rm = TRUE))
ncss_pivot <- ncss_filtered %>%
filter(YEAR == max(YEAR, na.rm = TRUE)) %>%
group_by(TRAD6, YEAR) %>%
summarize(
mean_income = mean(INCOME, na.rm = TRUE),
median_income = median(INCOME, na.rm = TRUE))
ncss_pivot
ncss_filtered %>% filter(TRAD6 %in% c("Chrétiennes","Juives","Musulmanes"))
#Part 3  pivoting
ncss_pivot <- ncss_filtered %>%
filter(YEAR == max(YEAR, na.rm = TRUE)) %>%
group_by(TRAD6, YEAR) %>%
summarize(
mean_income = mean(INCOME, na.rm = TRUE),
median_income = median(INCOME, na.rm = TRUE))
ncss_pivot
ncss_filtered
unique(ncss_filtered$TRAD6)
ncss_filtered %>% filter(TRAD6 %in% c('Chrétiennes','Juives','Musulmanes'))
ncss_filtered %>% filter(TRAD6 %in% c('Chrétiennes','Juives','Musulmanes'))
unique(ncss_filtered$TRAD6)
ncss_filtered <- filter(TRAD6 %in% c("Chrétiennes","Juives","Musulmanes"))
ncss_filtered <- ncss_filtered %>% filter(TRAD6 %in% c("Chrétiennes","Juives","Musulmanes"))
unique(ncss_filtered$TRAD6)
ncss_pivot <- ncss_filtered %>%
filter(YEAR == max(YEAR, na.rm = TRUE)) %>%
group_by(TRAD6, YEAR) %>%
summarize(
mean_income = mean(INCOME, na.rm = TRUE),
median_income = median(INCOME, na.rm = TRUE))
ncss_pivot
ncss_filtered
ncss_pivot <- ncss_filtered %>%
filter(YEAR == max(YEAR, na.rm = TRUE)) %>%
group_by(TRAD6, YEAR) %>%
summarize(
congressions = sum(NUMOFFMBR, na.rm = TRUE),
mean_income = mean(INCOME, na.rm = TRUE),
median_income = median(INCOME, na.rm = TRUE))
ncss_pivot
ncss_pivot <- ncss_pivot %>%
mutate(AVG_INCOME = if_else(congressions  >= median_income, 1, 0)
ncss_pivot
ncss_pivot <- ncss_pivot %>%
mutate(AVG_INCOME = if_else(mean_income >= congressions, 1, 0)
ncss_pivot
ncss_pivot <- ncss_pivot %>%
mutate(AVG_INCOME = if_else(ncss_pivot$mean_income >= ncss_pivot$congressions, 1, 0)
ncss_pivot
ncss_pivot <- ncss_pivot %>%
mutate(AVG_INCOME = if_else(ncss_pivot$mean_income >= ncss_pivot$congressions, 1, 0))
ncss_pivot <- ncss_pivot %>%
mutate(AVG_INCOME = if_else(mean_income >= num_congregations, 1, 0))
ncss_pivot <- ncss_pivot %>%
mutate(AVG_INCOME = if_else(mean_income >= congressions, 1, 0))
ncss_pivot
#Part 1 bar plot
ggplot (ncss_filtered , aes (x = YEAR , y = NUMOFFMBR , fill = "blue" ) ) +
geom_bar (stat = "identity" ) +
facet _wrap ( vars(TRAD12) ) + guides (fill = "none") + labs (x = " \nYear " , y = " Congressions \n" , fill = "TRAD12 " )
ggplot (ncss_filtered , aes (x = YEAR , y = NUMOFFMBR , fill = "blue" ) ) +
geom_bar (stat = "identity" ) +
facet_wrap ( vars(TRAD12) ) + guides (fill = "none") + labs (x = " \nYear " , y = " Congressions \n" , fill = "TRAD12 " )
ggplot (ncss_filtered , aes (x = factor(YEAR) , y = NUMOFFMBR , fill = "blue" ) ) +
geom_bar (stat = "identity" ) +
facet_wrap ( vars(TRAD12) ) + guides (fill = "none") + labs (x = " \nYear " , y = " Congressions \n" , fill = "TRAD12 " )
#Part 1 bar plot
ggplot (ncss_filtered , aes (x = factor(YEAR) , y = NUMOFFMBR , fill = TRAD12 ) ) +
geom_bar (position = "fill" ) +
facet_wrap (vars(TRAD12) ) + guides (fill = "none") + labs (x = " \nYear " , y = " Congressions \n" , fill = "TRAD12 " )
ggplot (ncss_filtered , aes (x = factor(YEAR) , y = NUMOFFMBR , fill = TRAD12)) +
geom_bar (position = "fill" ) +
facet_wrap (vars(TRAD12) )  + labs (x = " \nYear " , y = " Congressions \n" , fill = "TRAD12 ")
#Part 1 bar plot
ggplot(ncss_filtered , aes (x = factor(YEAR) , y = NUMOFFMBR , fill = TRAD12)) +
geom_bar(position = "fill" ) +
labs (x = " \nYear " , y = " Congressions \n" , fill = "TRAD12 ")
#Part 1 bar plot
ggplot(ncss_filtered , aes (x = factor(YEAR) , y = NUMOFFMBR , fill = TRAD12)) +
geom_bar(stat = "identity" ) +
labs (x = " \nYear " , y = " Congressions \n" , fill = "TRAD12 ")
ncss_filtered
ggplot(ncss_filtered, aes (x = TRAD6 , y = NUMOFFMBR, fill = TRAD12) ) +
geom_bar(stat = "identity", position = "dodge") +
facet_wrap(vars(YEAR)) +
guides ( f i l l = "none" ) + labs ( x = " \nTRAD6" , y = " Congressions\n" , f i l l = "TRAD12" )
ggplot(ncss_filtered, aes (x = TRAD6 , y = NUMOFFMBR, fill = TRAD12)) +
geom_bar(stat = "identity", position = "dodge") +
facet_wrap(vars(YEAR)) +
labs ( x = " \nTRAD6" , y = " Congressions\n" , fill = "TRAD12")
ggplot(ncss_filtered, aes(x = factor(YEAR) ,y = NUMOFFMBR , fill = REGION)) +
geom_boxplot(width = 0.5) + geom_point(position = position_jitter(height = 1)) +
labs (x = " \nYEAR " , y = " Congressions\n" )
#Part 4 boxplot
ggplot(ncss_filtered, aes(x = factor(YEAR) ,y = NUMOFFMBR , fill = GDREGION)) +
geom_boxplot(width = 0.5) + geom_point(position = position_jitter(height = 1)) +
labs (x = " \nYEAR " , y = " Congressions\n" )
ggplot(ncss_filtered, aes(x = factor(YEAR) ,y = NUMOFFMBR , fill = GDREGION)) +
geom_boxplot(width = 0.5) + #geom_point(position = position_jitter(height = 1)) +
labs (x = " \nYEAR " , y = " Congressions\n" )
ggplot(ncss_filtered, aes(x = INCOME, y = GDREGION, fill = INCOME)) +
geom_density_ridges(alpha = 0.6) +
labs(x = "Income", y = "Region", fill = "Income")
ggplot(ncss_filtered, aes(x = INCOME, y = GDREGION, fill = INCOME)) +
labs(x = "Income", y = "Region", fill = "Income")
ggplot(ncss_filtered, aes(x = INCOME, y = GDREGION, fill = INCOME)) +
geom_jitter(alpha = 0.5, width = 0.2) +
labs(x = "Income", y = "Region", fill = "Income")
library(tidyverse)
lapply(c("tidyverse", "ggplot2"),  pkgTest)
library(dplyr)
library(readxl)
ncss_data <- read.csv("/Users/nourkebbi/Documents/GitHub/DataViz_2026/problemSets/PS02/my_answers/NCSS_v1.csv", header = TRUE, sep = ",")
ncss_filtered <- nscc_data %>% select('CASEID','YEAR','GDREGION','NUMOFFMBR','TRAD6','TRAD12','INCOME')
ncss_filtered <- ncss_filtered %>% filter(TRAD6 %in% c("Chrétiennes","Juives","Musulmanes"))
ncss_pivot <- ncss_filtered %>%
filter(YEAR == max(YEAR, na.rm = TRUE)) %>%
group_by(TRAD6, YEAR) %>%
summarize(
congressions = sum(NUMOFFMBR, na.rm = TRUE),
mean_income = mean(INCOME, na.rm = TRUE),
median_income = median(INCOME, na.rm = TRUE))
ncss_pivot <- ncss_pivot %>%
mutate(AVG_INCOME = if_else(mean_income >= congressions, 1, 0))
ncss_pivot
#Part 1 bar plot
ggplot(ncss_filtered, aes (x = factor(YEAR) , y = NUMOFFMBR , fill = TRAD12)) +
geom_bar(stat = "identity" ) +
labs (x = " \nYear " , y = " Congressions \n" , fill = "TRAD12 ")
ggplot(ncss_filtered, aes (x = TRAD6 , y = NUMOFFMBR, fill = TRAD12)) +
geom_bar(stat = "identity", position = "dodge") +
facet_wrap(vars(YEAR)) +
labs (x = " \nTRAD6" , y = " Congressions\n" , fill = "TRAD12")
ggplot(ncss_filtered, aes(x = INCOME, y = GDREGION, fill = INCOME)) +
geom_jitter(alpha = 0.5, width = 0.2) +
labs(x = "Income", y = "Region", fill = "Income")
ggplot(ncss_filtered, aes(x = factor(YEAR) ,y = NUMOFFMBR , fill = GDREGION)) +
geom_boxplot(width = 0.5) + #geom_point(position = position_jitter(height = 1)) +
labs (x = " \nYEAR " , y = " Congressions\n" )
